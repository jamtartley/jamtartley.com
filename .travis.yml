language: node_js
node_js:
    - node
install:
    - npm install
cache:
    directories:
        - node_modules
notifications:
    email: false
    irc:
        use_notice: true
        skip_join: false
        on_success: always
        on_failure: always
        template:
            - "'%{commit_message}'"
            - "%{author} pushed to the repo %{repository_slug} on the %{branch} branch. %{message}"
            - "============================================================================================"
            - "Code diff: %{compare_url}"
            - "Travis build log: %{build_url}"
        channels:
            secure: Hn6zp44LcblNsIS5ihJRvSJcdB6nTkgctKQEsbhgHTY8USX4CoRa2kgomrg+PTg1gnIRVCbzUrk3XOUzywn5siV8NS14zCRUUxyktgS7vPyh/0lzh9wMcFfmFWTev58qRj438D6UCjtsOlUwVF3uZVawh3DQYe0PEYzCK3nNSE6+gpT+XJWrQFu+QUyHeHDINlhvVXtEvogVa4YWcWlbl+Dc/aHBrPMo3hF255rCD/5mRoIoM3H2AONf1eOfh0z08brKAzjwJKgiFCSU8/MHBCw+IvLa6rwjqYToHudhFeq8FTb+Pyk+ZCLJuBzKb9mvrOzLvdNJ5Re4w3gPbBlvDFoqI8bTCWLhRrQyJ9GtHw0p8HdVBYm2GPiXUPmFd87yED0nBJZ5WQ9xEN1N2C8zLkhBhNR5aEG9utYbevYyIHKdr2X6Wt1kWa2wzyn6s8xOecFDg7Ygbuijvn0ZXmeRldj+UHMcQkFqv6QoeC0BG5VZncERrOeIOk6IZoqAO0cNQfzu5mLUZXJSL+hJvswZPgW9nq+fq9LsfXWJi/dNxnW/dBmguxOYKaiVs/ZGafSTfL+tJq6J7aF7TXR7xyxQUBp8VFFBYLKYROIMQLN1RYuM0xhE4O3eImKCXhHkPihYlDgybQGEL+QCiuDf5tDMLDmr6HAZIr+ZHF3ZleIGIH8=
git:
    depth: false
before_deploy:
    - npm run prod
deploy:
    provider: s3
    access_key_id: AKIA2Y645FQNBLTWCVOU
    secret_access_key:
        secure: MvYMUA+nJM4jvkpheCAUQLpFxXV+JVQ5diXtG9yUAHyBqvzxpAZRVeuYdyqxhw/1LHr1supLjPccLnTydeUuPRhnzHTI+C4D8T5uXNLJD2tKCg/gXla9uFJIUP9abFhlfU+VCwTTfDgBI0/XZw+wRxjMV/Az2RLpkLBxthN/htFslFn2Sft6W236GuDOzCYnxE4PqsPmHQblsvQTIS+fpquuyWBjXRl38TQcJ2erbTw3q1TNtEGDT7cFdgjANWTZXSAxrBbxvnkjWe5TTXUjKYWMpPphMG1K9SRK2G2uGURf1afoeYFYiLQXV7Tj2W2MpbfFx8s3DxoIwzxK9ceqEAspGCUb3cFjZKQUIggfnJ7NubXxRwCQ22HWyLJNE1qVyfcz0fCZ3Kd0Vyo4lM3NJvnpGe6i2MY9rAtn9WO9T2rA5egBXIGYxWRZYHMv/qY40kufXD9YFTOLwqnyVIebp5QRCvXgH2TD2BE2CZLZJ4ZjSnsGoSspMsJ01i4UtkZ1dOg/w4Yfo8WQmYPEFkwpoFkFom6M2c52zugOdDE3QjUERyJbTv5rtVGUify8T5n/4JZNSZjQDYsie7Oy9KT+ivonuSGJyH+NmOF/udfcoY3xxRsVIPkTy65isTcOYdxdMhHzqHYma0Dz8Uaxmq6QFmhMTdS1cuUQbQA3s0sfKjQ=
    bucket: jamtartley-com
    local-dir: dist
    acl: public_read
    region: eu-west-2
    skip_cleanup: true
    on:
        repo: jamtartley/jamtartley.com
        branch: master
